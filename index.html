<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>건축사사무소 포트폴리오 | AI Integrated</title>
    <!-- Google Fonts: Noto Sans KR (Extra Light 100 포함) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #ffffff;
            --text-main: #1a1a1a;
            --text-sub: #666666;
            --accent: #000000;
            --card-bg: #f9f9f9;
            --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 2rem 10%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .logo {
            font-size: 1.1rem;
            font-weight: 100;
            letter-spacing: 5px;
            text-transform: uppercase;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-main);
            margin-left: 2rem;
            font-size: 0.8rem;
            font-weight: 100;
            letter-spacing: 1px;
            transition: var(--transition);
        }

        .nav-links a:hover {
            opacity: 0.5;
        }

        /* Hero Section */
        header {
            height: 60vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 10%;
            margin-top: 80px;
        }

        header h1 {
            font-size: 3.5rem;
            font-weight: 100;
            margin-bottom: 1.5rem;
            animation: fadeInUp 1s ease-out;
            letter-spacing: -1px;
        }

        .about-text {
            max-width: 600px;
            font-size: 1rem;
            color: var(--text-sub);
            font-weight: 300;
            word-break: keep-all;
            animation: fadeInUp 1.2s ease-out;
        }

        /* Portfolio Grid */
        .container {
            padding: 0 10% 100px;
        }

        .grid-title {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin-bottom: 3rem;
            color: var(--text-sub);
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
            font-weight: 300;
        }

        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 40px;
        }

        .project-card {
            position: relative;
            background: var(--card-bg);
            overflow: hidden;
            aspect-ratio: 4 / 5;
            cursor: pointer;
            animation: fadeInUp 1.5s ease-out;
        }

        .project-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
            filter: grayscale(100%);
        }

        .project-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 40px;
            opacity: 0;
            transition: var(--transition);
        }

        .project-card:hover .project-overlay {
            opacity: 1;
        }

        .project-card:hover .project-image {
            transform: scale(1.05);
            filter: grayscale(0%);
        }

        .project-category {
            color: #888;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
            transform: translateY(20px);
            transition: var(--transition);
        }

        .project-overlay h3 {
            color: #fff;
            font-size: 1.5rem;
            margin-bottom: 10px;
            transform: translateY(20px);
            transition: var(--transition);
            transition-delay: 0.05s;
            font-weight: 300;
        }

        .project-overlay p {
            color: #ccc;
            font-size: 0.85rem;
            font-weight: 100;
            transform: translateY(20px);
            transition: var(--transition);
            transition-delay: 0.1s;
        }

        /* Profile Section */
        .profile-section {
            padding: 100px 10%;
            background: #fbfbfb;
            display: flex;
            gap: 60px;
            align-items: center;
            flex-wrap: wrap;
        }

        .profile-text {
            flex: 1;
            min-width: 300px;
        }

        .profile-text h2 {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            color: var(--text-sub);
            margin-bottom: 2rem;
            font-weight: 400;
        }

        .philosophy {
            font-size: 1.5rem;
            font-weight: 100;
            line-height: 1.5;
            margin-bottom: 2rem;
            word-break: keep-all;
        }

        .bio {
            font-size: 0.95rem;
            color: var(--text-sub);
            font-weight: 300;
            max-width: 500px;
            word-break: keep-all;
        }

        /* AI Section (New) */
        .ai-consultant {
            padding: 100px 10%;
            background: #ffffff;
            border-top: 1px solid #eee;
        }

        .ai-header {
            margin-bottom: 3rem;
            text-align: center;
        }

        .ai-header h2 {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            color: var(--text-sub);
            margin-bottom: 1rem;
        }

        .ai-header p {
            font-size: 1.5rem;
            font-weight: 100;
        }

        .ai-interface {
            max-width: 700px;
            margin: 0 auto;
            background: #fff;
            padding: 2rem;
            border: 1px solid #f0f0f0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
        }

        .ai-textarea {
            width: 100%;
            height: 120px;
            padding: 1rem;
            border: 1px solid #eee;
            font-family: inherit;
            font-size: 0.9rem;
            resize: none;
            outline: none;
            font-weight: 300;
            margin-bottom: 1rem;
        }

        .ai-btn-group {
            display: flex;
            gap: 10px;
        }

        .ai-btn {
            background: #000;
            color: #fff;
            border: none;
            padding: 12px 24px;
            font-size: 0.8rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 300;
            flex: 1;
        }

        .ai-btn:hover {
            opacity: 0.8;
        }

        .ai-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .ai-result {
            margin-top: 2rem;
            padding: 20px;
            background: #fcfcfc;
            border-left: 2px solid #000;
            font-size: 0.95rem;
            font-weight: 300;
            line-height: 1.8;
            white-space: pre-wrap;
            display: none;
        }

        .loading-dots {
            display: none;
            text-align: center;
            font-size: 1.2rem;
            margin: 1rem 0;
        }

        .audio-controls {
            display: none;
            margin-top: 1rem;
            align-items: center;
            gap: 10px;
        }

        /* Contact Section */
        .contact {
            padding: 100px 10%;
            background: #000;
            color: #fff;
        }

        .contact-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 40px;
        }

        .contact-info h2 {
            font-size: 2rem;
            font-weight: 100;
            margin-bottom: 2rem;
            letter-spacing: 2px;
        }

        .info-item {
            margin-bottom: 1.5rem;
        }

        .info-label {
            display: block;
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #888;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1rem;
            font-weight: 100;
        }

        /* Footer */
        footer {
            padding: 40px 10%;
            font-size: 0.7rem;
            color: #555;
            background: #000;
            text-align: center;
            border-top: 1px solid #222;
            letter-spacing: 1px;
            font-weight: 100;
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            header h1 { font-size: 2.2rem; }
            .project-grid { grid-template-columns: 1fr; }
            nav { padding: 1.5rem 5%; }
            .container, header, .contact, .profile-section, .ai-consultant { padding-left: 5%; padding-right: 5%; }
            .philosophy { font-size: 1.2rem; }
            .ai-btn-group { flex-direction: column; }
        }
    </style>
</head>
<body>

    <nav>
        <div class="logo">MIJIN KANG</div>
        <div class="nav-links">
            <a href="#projects">PROJECTS</a>
            <a href="#profile">PROFILE</a>
            <a href="#ai">✨ CONSULTING</a>
            <a href="#contact">CONTACT</a>
        </div>
    </nav>

    <header>
        <h1>건축사사무소</h1>
        <p class="about-text">
            조용한 관찰을 통해 땅의 목소리를 듣고, 그 위에 가장 정직한 선을 그립니다. 
            화려함보다는 덜어냄의 미학을 통해 시간이 흘러도 변하지 않는 가치를 지향합니다.
        </p>
    </header>

    <div id="projects" class="container">
        <h2 class="grid-title">Selected Works</h2>
        <div class="project-grid">
            <div class="project-card">
                <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=2070&auto=format&fit=crop" alt="The Minimal House" class="project-image">
                <div class="project-overlay">
                    <span class="project-category">Residential</span>
                    <h3>정연재 (靜然齋)</h3>
                    <p>경기 양평 | 지상 2층 | 단독주택</p>
                </div>
            </div>
            <div class="project-card">
                <img src="https://images.unsplash.com/photo-1574362848149-11496d93a7c7?q=80&w=1984&auto=format&fit=crop" alt="Vertical Commercial Architecture" class="project-image">
                <div class="project-overlay">
                    <span class="project-category">Commercial</span>
                    <h3>연남 수직정원</h3>
                    <p>서울 마포구 | 지상 6층 | 근린생활시설</p>
                </div>
            </div>
            <div class="project-card">
                <img src="https://images.unsplash.com/photo-1497366754035-f200968a6e72?q=80&w=2069&auto=format&fit=crop" alt="Interior Design" class="project-image">
                <div class="project-overlay">
                    <span class="project-category">Interior</span>
                    <h3>스튜디오 루시다</h3>
                    <p>서울 용산구 | 180㎡ | 오피스 인테리어</p>
                </div>
            </div>
            <div class="project-card">
                <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2070&auto=format&fit=crop" alt="Courtyard Residential House" class="project-image">
                <div class="project-overlay">
                    <span class="project-category">Residential</span>
                    <h3>중정의 집</h3>
                    <p>제주 한경면 | 지상 1층 | 전원주택</p>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Consultant Section -->
    <section id="ai" class="ai-consultant">
        <div class="ai-header">
            <h2>AI Architectural Consulting</h2>
            <p>당신의 공간을 위한 ✨ AI 설계를 제안합니다.</p>
        </div>
        <div class="ai-interface">
            <textarea id="aiInput" class="ai-textarea" placeholder="어떤 공간을 꿈꾸시나요? 대지의 특징이나 원하는 무드(예: 숲속의 고요한 작업실, 빛이 가득한 협소주택 등)를 적어주세요."></textarea>
            <div class="ai-btn-group">
                <button id="generateBtn" class="ai-btn">✨ 컨셉 제안받기</button>
                <button id="ttsBtn" class="ai-btn" disabled style="background: #555;">✨ AI 음성 브리핑</button>
            </div>
            <div id="loading" class="loading-dots">● ● ●</div>
            <div id="aiResult" class="ai-result"></div>
            <div id="audioStatus" style="font-size: 0.7rem; color: #888; margin-top: 5px; text-align: center;"></div>
        </div>
    </section>

    <section id="profile" class="profile-section">
        <div class="profile-text">
            <h2>Architect Profile</h2>
            <p class="philosophy">
                "건축은 비어있는 공간에 침묵을 채우는 일입니다."
            </p>
            <p class="bio">
                강미진은 서울을 기반으로 활동하는 건축가입니다. 
                도시의 복잡함 속에서 개인의 안식을 위한 미니멀한 공간을 탐구하며, 
                재료의 본질적인 물성과 빛의 조화를 통해 정적인 아름다움을 구현하는 데 집중합니다.
                다양한 주거 및 상업 프로젝트를 통해 대지가 가진 잠재력을 극대화하는 작업을 이어오고 있습니다.
            </p>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="contact-content">
            <div class="contact-info">
                <h2>Contact</h2>
                <div class="info-item">
                    <span class="info-label">Email</span>
                    <span class="info-value">contact@mijin-arch.com</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Office</span>
                    <span class="info-value">+82 (0)2 1234 5678</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Location</span>
                    <span class="info-value">5F, 123 Architecture-ro, Jongno-gu, Seoul</span>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <p>&copy; 2026 MIJIN KANG. ALL RIGHTS RESERVED.</p>
    </footer>

    <script>
        // API Configurations
        const apiKey = ""; // Runtime provides the key

        // DOM Elements
        const aiInput = document.getElementById('aiInput');
        const generateBtn = document.getElementById('generateBtn');
        const ttsBtn = document.getElementById('ttsBtn');
        const aiResult = document.getElementById('aiResult');
        const loading = document.getElementById('loading');
        const audioStatus = document.getElementById('audioStatus');

        // Gemini AI Text Generation
        async function generateArchitectureConcept() {
            const userPrompt = aiInput.value.trim();
            if (!userPrompt) return;

            generateBtn.disabled = true;
            ttsBtn.disabled = true;
            aiResult.style.display = 'none';
            loading.style.display = 'block';

            const systemPrompt = "당신은 10년차 시니어 건축가 '강미진'의 AI 페르소나입니다. 사용자의 공간 요구사항을 듣고, 강미진 건축가의 철학(비움의 미학, 침묵, 정직한 선, 본질적 물성)을 담은 건축 컨셉을 제안하세요. 1. 컨셉명 2. 설계 의도 3. 주요 자재 및 빛의 활용 방안 순서로 감성적이고 전문적으로 답변하세요. 한국어로 답변하세요.";

            const payload = {
                contents: [{ parts: [{ text: `사용자의 요구사항: ${userPrompt}` }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            let retries = 0;
            const maxRetries = 5;

            while (retries < maxRetries) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error('API Error');

                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (text) {
                        aiResult.innerText = text;
                        aiResult.style.display = 'block';
                        ttsBtn.disabled = false;
                        ttsBtn.style.background = "#000";
                        break;
                    }
                } catch (error) {
                    const delay = Math.pow(2, retries) * 1000;
                    await new Promise(res => setTimeout(res, delay));
                    retries++;
                    if (retries === maxRetries) {
                        aiResult.innerText = "죄송합니다. AI 건축가의 제안을 가져오는 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.";
                        aiResult.style.display = 'block';
                    }
                }
            }

            loading.style.display = 'none';
            generateBtn.disabled = false;
        }

        // Gemini AI TTS Integration
        async function speakConcept() {
            const textToSpeak = aiResult.innerText;
            if (!textToSpeak) return;

            ttsBtn.disabled = true;
            audioStatus.innerText = "음성을 생성 중입니다...";

            const payload = {
                contents: [{ parts: [{ text: `강미진 건축가의 목소리로 부드럽고 차분하게 읽어주세요: ${textToSpeak}` }] }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: {
                        voiceConfig: {
                            prebuiltVoiceConfig: { voiceName: "Kore" } // Calm female voice
                        }
                    }
                },
                model: "gemini-2.5-flash-preview-tts"
            };

            let retries = 0;
            const maxRetries = 5;

            while (retries < maxRetries) {
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error('TTS Error');

                    const data = await response.json();
                    const pcmData = data.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;

                    if (pcmData) {
                        playAudio(pcmData);
                        break;
                    }
                } catch (error) {
                    const delay = Math.pow(2, retries) * 1000;
                    await new Promise(res => setTimeout(res, delay));
                    retries++;
                    if (retries === maxRetries) {
                        audioStatus.innerText = "음성 생성에 실패했습니다.";
                    }
                }
            }
            ttsBtn.disabled = false;
        }

        // PCM to WAV and Playback
        function playAudio(base64Data) {
            const binaryString = atob(base64Data);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }

            const wavHeader = createWavHeader(len, 24000); // Standard sample rate for Gemini TTS
            const blob = new Blob([wavHeader, bytes], { type: 'audio/wav' });
            const url = URL.createObjectURL(blob);
            const audio = new Audio(url);
            
            audio.onplay = () => audioStatus.innerText = "음성 브리핑 재생 중...";
            audio.onended = () => audioStatus.innerText = "";
            audio.play();
        }

        function createWavHeader(dataLength, sampleRate) {
            const header = new ArrayBuffer(44);
            const view = new DataView(header);
            
            writeString(view, 0, 'RIFF');
            view.setUint32(4, 36 + dataLength, true);
            writeString(view, 8, 'WAVE');
            writeString(view, 12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true); // PCM
            view.setUint16(22, 1, true); // Mono
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * 2, true);
            view.setUint16(32, 2, true);
            view.setUint16(34, 16, true);
            writeString(view, 36, 'data');
            view.setUint32(40, dataLength, true);
            
            return header;
        }

        function writeString(view, offset, string) {
            for (let i = 0; i < string.length; i++) {
                view.setUint8(offset + i, string.charCodeAt(i));
            }
        }

        // Event Listeners
        generateBtn.addEventListener('click', generateArchitectureConcept);
        ttsBtn.addEventListener('click', speakConcept);

        // UI Interactions
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        const observerOptions = { threshold: 0.1 };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = "1";
                    entry.target.style.transform = "translateY(0)";
                }
            });
        }, observerOptions);

        document.querySelectorAll('.project-card, .profile-text, .ai-interface').forEach(el => {
            el.style.opacity = "0";
            el.style.transform = "translateY(30px)";
            el.style.transition = "all 0.8s ease-out";
            observer.observe(el);
        });
    </script>
</body>
</html>
